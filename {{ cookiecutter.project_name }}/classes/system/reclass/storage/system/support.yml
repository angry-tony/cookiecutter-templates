parameters:
  reclass:
    storage:
      node:
        {{ cookiecutter.bil01_name }}.{{ cookiecutter.domain_name }}:
          name: {{ cookiecutter.bil01_name }}
          domain: {{ cookiecutter.domain_name }}
          classes:
          - system.linux.system.single
          - system.openstack.billometer.single
          params:
            salt_master_host: ${_param:reclass_config_master}
            single_address: {{ cookiecutter.bil01_ip }}
        {{ cookiecutter.prx01_name }}.{{ cookiecutter.domain_name }}:
          name: {{ cookiecutter.prx01_name }}
          domain: {{ cookiecutter.domain_name }}
          classes:
          - system.linux.system.single
          - system.openstack.proxy.single
          params:
            salt_master_host: ${_param:reclass_config_master}
            single_address: {{ cookiecutter.prx01_ip }}
        {{ cookiecutter.mon01_name }}.{{ cookiecutter.domain_name }}:
          name: {{ cookiecutter.mon01_name }}
          domain: {{ cookiecutter.domain_name }}
          classes:
          - system.linux.system.single
          - system.openstack.monitor.single
          params:
            salt_master_host: ${_param:reclass_config_master}
            single_address: {{ cookiecutter.mon01_ip }}
        {{ cookiecutter.mtr01_name }}.{{ cookiecutter.domain_name }}:
          name: {{ cookiecutter.mtr01_name }}
          domain: {{ cookiecutter.domain_name }}
          classes:
          - system.linux.system.single
          {%- if cookiecutter.metering_cluster == "True" %}
          - system.openstack.meter.cluster
          {%- else %}
          - system.openstack.meter.single
          {%- endif %}
          params:
            salt_master_host: ${_param:reclass_config_master}
            single_address: {{ cookiecutter.mtr01_ip }}
            {%- if cookiecutter.metering_cluster == "True" %}
            keepalived_vip_priority: 100
            {%- endif %}

        {%- if cookiecutter.metering_cluster == "True" %}

        {{ cookiecutter.mtr02_name }}.{{ cookiecutter.domain_name }}:
          name: {{ cookiecutter.mtr02_name }}
          domain: {{ cookiecutter.domain_name }}
          classes:
          - system.linux.system.single
          - system.openstack.meter.cluster
          params:
            salt_master_host: ${_param:reclass_config_master}
            single_address: {{ cookiecutter.mtr02_ip }}
            keepalived_vip_priority: 101

        {%- endif %}

        {{ cookiecutter.log01_name }}.{{ cookiecutter.domain_name }}:
          name: {{ cookiecutter.log01_name }}
          domain: {{ cookiecutter.domain_name }}
          classes:
          - system.linux.system.single
          - system.openstack.log.single
          params:
            salt_master_host: ${_param:reclass_config_master}
            single_address: {{ cookiecutter.log01_ip }}
